!function(e){function t(t){for(var a,l,s=t[0],i=t[1],c=t[2],d=0,m=[];d<s.length;d++)l=s[d],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&m.push(n[l][0]),n[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);for(u&&u(t);m.length;)m.shift()();return o.push.apply(o,c||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,s=1;s<r.length;s++){var i=r[s];0!==n[i]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=r[0]))}return e}var a={},n={0:0},o=[];function l(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=e,l.c=a,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(r,a,function(t){return e[t]}.bind(null,a));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="";var s=window.webpackJsonp=window.webpackJsonp||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var u=i;o.push([6,1]),r()}([,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(3),n=r(4),o=r(15),l=r(5);class s{static initialize(){if(null==this.getAPI())throw new Error("[OverlayService] Failed to find OverlayPlugin API");this.registerListeners()}static getAPI(){return window.OverlayPluginApi}static parseCombatData(e){if(null==e)return;let t=null,r=e.Encounter;null!=r&&(t=new o.Encounter({name:r.CurrentZoneName,duration:r.duration}));let a=[],s=e.Combatant;return null!=s&&Object.keys(s).forEach(e=>{let t=s[e];if(null==t)return;let r=t.Job;if(null==r)return;let o=new n.Player({name:e,job:l.SchemasService.getJobFromScheme(r.toUpperCase())});o.updateData({dps:t.dps,damage_perc:t["damage%"],damage_total:t.damage,damage_blocked:t.damageShield,damage_blocked_perc:t.BlockPct,deaths:t.deaths,max_heal_perc:t["healed%"],max_heal:t.healed,hps:t.ENCHPS,threat:t.threatstr,threat_delta:t.threatdelta}),a.push(o)}),[t,a]}static registerListeners(){document.addEventListener("onOverlayDataUpdate",e=>{if(null==e)return;let t=e.detail;null!=t&&("CombatData"==t.type?this.onOverlayCombatUpdate.emit(this.parseCombatData(t)):this.onOverlayDataUpdate.emit(t))}),document.addEventListener("onOverlayStateUpdate",e=>{null!=e&&null!=e.detail&&(this.overlayState={locked:e.detail.isLocked},this.onOverlayState.emit(this.overlayState))}),document.addEventListener("onBroadcastMessageReceive",e=>{null!=e&&console.debug("onBroadcastMessageReceive",e)}),document.addEventListener("onRecvMessage",e=>{null!=e&&console.debug("onRecvMessage",e)}),document.addEventListener("onLogLine",e=>{if(null==e)return;let t=e.detail;if(null==t)return;let r=t.opcode;null!=r?56!==r?this.onOverlayLogLine.emit({type:r,timestamp:t.timestamp,payload:t.payload}):this.onOverlayEcho.emit(t.payload[3]):this.onOverlayEcho.emit(t.message)})}static onDebug(e){console.debug("[OverlayService] "+e)}}t.OverlayService=s,s.onOverlayState=new a.Hook,s.onOverlayEcho=new a.Hook,s.onOverlayLogLine=new a.Hook,s.onOverlayDataUpdate=new a.Hook,s.onOverlayCombatUpdate=new a.Hook},,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Player=class{constructor(e){this.profile=e}isLocalPlayer(){return"YOU"===this.profile.name}updateData(e){this.data=e}getName(){return this.profile.name}getJob(){return this.profile.job}getDPS(){return"âˆž"===this.data.dps.toString()?0:this.data.dps}getTotalDamage(e=!1){return e?this.data.damage_perc:this.data.damage_total}getHPS(){return this.data.hps}getIcon(){return`./assets/icons/${this.profile.job.id}.png`}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(17);t.SchemasService=class{static initialize(){this.schema=a}static getJobFromScheme(e){let t=this.schema[e];return null==t&&(t=this.schema.DEFAULT),{color:t.color,id:e,name:t.name}}}},function(e,t,r){r(7),e.exports=r(8)},function(e,t,r){},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),n=r(10),o=r(14);n.render(a.createElement(o.App,null),document.getElementById("app-container"))},,,,,,function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),n=r(2),o=r(18),l=r(5),s=r(19),i=r(4),c=r(20);class u extends a.Component{constructor(e){super(e),this.state={isLoaded:!1}}componentDidMount(){n.OverlayService.initialize(),l.SchemasService.initialize(),o.EncounterService.initialize(),this.setState({isLoaded:!0})}componentWillUnmount(){o.EncounterService.onDestroy()}fakePlayer(){let e=new i.Player({job:l.SchemasService.getJobFromScheme("ARC"),name:"Bromvlieg"});return e.updateData({damage_blocked:100,dps:342,damage_blocked_perc:"50%",damage_perc:"100%",damage_total:1e4,deaths:0,hps:0,max_heal:1e3,max_heal_perc:"100%",threat:"0",threat_delta:0}),e}renderApp(){if(this.state.isLoaded)return a.createElement(a.Fragment,null,a.createElement(c.Navbar,null),a.createElement("div",{className:"player-list"},a.createElement(s.PlayerElement,{index:1,player:this.fakePlayer()})))}render(){return a.createElement("div",{className:"app-container"},this.renderApp())}}t.App=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(16);t.Encounter=class{constructor(e){this.currentSortMode=a.EncounterSort.SORT_BY_DPS,this.data=e,this.players=[]}getID(){return this.data.name}updateTime(e){this.data.duration=e}getTime(){return this.data.duration}removePlayer(e){delete this.players[e]}setPlayers(e){this.players=e,this.sortPlayers(this.currentSortMode)}sortPlayers(e){switch(e){case a.EncounterSort.SORT_BY_DPS:this.players.sort((e,t)=>e.getDPS()>t.getDPS()?1:-1);break;case a.EncounterSort.SORT_BY_TOTAL_DAMAGE:this.players.sort((e,t)=>e.getTotalDamage()>t.getTotalDamage()?1:-1);break;case a.EncounterSort.SORT_BY_DEFENSE:case a.EncounterSort.SORT_BY_HEAL:}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.SORT_BY_DPS=0]="SORT_BY_DPS",e[e.SORT_BY_TOTAL_DAMAGE=1]="SORT_BY_TOTAL_DAMAGE",e[e.SORT_BY_HEAL=2]="SORT_BY_HEAL",e[e.SORT_BY_DEFENSE=3]="SORT_BY_DEFENSE"}(t.EncounterSort||(t.EncounterSort={}))},function(e){e.exports=JSON.parse('{"GLA":{"color":"rgb(21, 28, 100)","name":"Gladiator"},"PLD":{"color":"rgb(21, 28, 100)","name":"Paladin"},"SCH":{"color":"rgb(121, 134, 203)","name":"Scholar"},"PGL":{"color":"rgb(255, 152, 0)","name":"Pugilist"},"WHM":{"color":"rgb(117, 117, 117)","name":"White Mage"},"MRD":{"color":"rgb(153, 23, 23)","name":"Marauder"},"BLM":{"color":"rgb(126, 87, 194)","name":"Black Mage"},"LNC":{"color":"rgb(63, 81, 181)","name":"Lancer"},"ARC":{"color":"rgb(158, 157, 36)","name":"Archer"},"THM":{"color":"rgb(126, 87, 194)","name":"Thaumaturge"},"CNJ":{"color":"rgb(117, 117, 117)","name":"Conjurer"},"ACN":{"color":"rgb(46, 125, 50)","name":"Arcanist"},"MNK":{"color":"rgb(255, 152, 0)","name":"Monk"},"WAR":{"color":"rgb(153, 23, 23)","name":"Warrior"},"DRG":{"color":"rgb(63, 81, 181)","name":"Dragoon"},"ROG":{"color":"rgb(211, 47, 47)","name":"Rogue"},"NIN":{"color":"rgb(211, 47, 47)","name":"Ninja"},"MCH":{"color":"rgb(0, 151, 167)","name":"Machinist"},"AST":{"color":"rgb(121, 85, 72)","name":"Astrologian"},"DRK":{"color":"rgb(136, 14, 79)","name":"Dark Knight"},"SAM":{"color":"rgb(255, 202, 40)","name":"Samurai"},"RDM":{"color":"rgb(233, 30, 99)","name":"Red Mage"},"DNC":{"color":"rgb(244, 143, 177)","name":"Dancer"},"GNB":{"color":"rgb(78, 52, 46)","name":"Gunbreaker"},"BLU":{"color":"rgb(0, 185, 247)","name":"Blue Mage"},"BRD":{"color":"rgb(158, 157, 36)","name":"Bard"},"SMN":{"color":"rgb(46, 125, 50)","name":"Summoner"},"DEFAULT":{"color":"rgb(250, 250, 250)","name":null}}')},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(3),n=r(2);class o{static initialize(){this.currentEncounter=null,this.bindObservables()}static onDestroy(){this.unbindObservables()}static bindObservables(){this.onOverlayCombatUpdate=n.OverlayService.onOverlayCombatUpdate.add("overlayReader",e=>{this.parseData(e)})}static parseData(e){if(null==e)return;let t=e[0];null!=t&&(t.setPlayers(e[1]),this.currentEncounter=t,this.onEncounterUpdate.emit(this.currentEncounter))}static unbindObservables(){this.onOverlayCombatUpdate.destroy()}}t.EncounterService=o,o.onEncounterUpdate=new a.Hook},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(0);class n extends a.Component{constructor(e){super(e)}render(){let e=this.props.player;return a.createElement("div",{className:"player-container"},a.createElement("img",{className:"player-icon",src:e.getIcon()}),a.createElement("div",{className:"player-info-container"},a.createElement("div",{className:"player-info"},this.props.index,". ",e.getName()),a.createElement("div",{className:"player-numbers"},e.getTotalDamage()," (",e.getTotalDamage(),", ",e.getTotalDamage(!0),")")))}}t.PlayerElement=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const a=r(0);class n extends a.Component{constructor(e){super(e)}render(){return a.createElement("div",{className:"navbar-container"},"Damage: Current fight")}}t.Navbar=n}]);
//# sourceMappingURL=main.js.map